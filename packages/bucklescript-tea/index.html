<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><link href="/reset.css" rel="stylesheet"/><meta data-react-helmet="true" content="Package index for the ReasonML/BuckleScript ecosystem" name="description"/><title data-react-helmet="true">bucklescript-tea | redex</title><link data-react-helmet="true" href="/highlight.css" rel="stylesheet"/><style>.css-1tsxiyg,[data-css-1tsxiyg]{position:relative;flex:1;-webkit-flex:1;}.css-1n3mti3,[data-css-1n3mti3]{display:-webkit-box; display: -moz-box; display: -ms-flexbox; display: -webkit-flex; display: flex;background-color:white;font-size:1.2em;width:100%;align-items:center;padding:0 .5em;-webkit-box-align:center;-webkit-align-items:center;}.css-3xwse6,[data-css-3xwse6]{fill:#dd4c39;opacity:0.75;margin:0.5em;}.css-h28iaj,[data-css-h28iaj]{padding:.75em .25em;width:100%;color:#dd4c39;}.css-h28iaj::-webkit-input-placeholder,[data-css-h28iaj]::-webkit-input-placeholder{color:#dd4c39;}.css-h28iaj::-moz-placeholder,[data-css-h28iaj]::-moz-placeholder{color:#dd4c39;}.css-h28iaj::-ms-input-placeholder,[data-css-h28iaj]::-ms-input-placeholder{color:#dd4c39;}.css-h28iaj::placeholder,[data-css-h28iaj]::placeholder{color:#dd4c39;}.css-17jpuwa,[data-css-17jpuwa]{position:absolute;z-index:10;margin-top:.5ex;width:100%;box-shadow:1ex 1ex 1em 0 rgba(0, 0, 0, .1);color:#444;}.css-17jpuwa > div,[data-css-17jpuwa] > div{margin:0px;border-top:1px solid #eee ;}.css-1y9oups,[data-css-1y9oups]{position:relative;display:inline-block;z-index:50;}.css-16r2wsi,[data-css-16r2wsi]{position:relative;font-size:0.85em;white-space:nowrap;cursor:help;}.css-16r2wsi > .popover,[data-css-16r2wsi] > .popover{display:block;position:absolute;bottom:100%;z-index:10;background-color:white;box-shadow:1px 1px 0px 0px rgba(0, 0, 0, 0.1);}.css-16r2wsi:hover > .popover,[data-css-16r2wsi]:hover > .popover{display:block;}.css-1rq3syy,[data-css-1rq3syy]{margin-left:0.25em;transform:translateY(-1px);-webkit-transform:translateY(-1px);}.css-aerbj5,[data-css-aerbj5]{margin-left:0.25em;transform:translateY(-1px);opacity:0.5;-webkit-transform:translateY(-1px);}*{box-sizing:border-box;}*:focus{outline-style:none;}body{line-height:inherit;color:#444;}h1, h2, h3{line-height:1.1em;font-weight:normal;}a{color:inherit;}button, input, select{background:none;border:none;font:inherit;}ol, ul{list-style:none;margin:0px;padding:0px;}html{font-size:15px;line-height:1.25em;font-family:-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Oxygen, Ubuntu, Cantarell, Fira Sans, Droid Sans, Helvetica Neue, sans-serif;box-sizing:border-box;overflow-y:scroll;}html, body, #PhenomicRoot{background-color:whiteSmoke;min-height:100%;margin:0px;}.css-uhxnxi,[data-css-uhxnxi]{margin:0 auto;max-width:960px;width:100%;}.css-c2fbi5,[data-css-c2fbi5]{height:1em;opacity:0.75;}.css-1ls92yq,[data-css-1ls92yq]{display:inline-block;opacity:0.75;font-size:0.85em;margin-left:0.5em;white-space:nowrap;background-color:#fff3;padding:0 1ex;text-decoration:none;}.css-1ls92yq:hover,[data-css-1ls92yq]:hover{opacity:1;text-decoration:underline;}.css-1l4v2hy,[data-css-1l4v2hy]{display:-webkit-box; display: -moz-box; display: -ms-flexbox; display: -webkit-flex; display: flex;flex-direction:column;min-height:100vh;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;}.css-1l4v2hy p,[data-css-1l4v2hy] p{margin-bottom:1.45rem;}.css-1yu5lzr,[data-css-1yu5lzr]{margin:1.45rem;}.css-1yu5lzr > div,[data-css-1yu5lzr] > div{display:-webkit-box; display: -moz-box; display: -ms-flexbox; display: -webkit-flex; display: flex;}.css-14dfss7,[data-css-14dfss7]{display:-webkit-box; display: -moz-box; display: -ms-flexbox; display: -webkit-flex; display: flex;align-items:center;color:#dd4c39;margin:0px;font-variant:small-caps;font-size:1.5em;line-height:1.1em;-webkit-box-align:center;-webkit-align-items:center;}.css-14dfss7:hover > svg,[data-css-14dfss7]:hover > svg{transform:rotateZ(15deg);cursor:pointer;-webkit-transform:rotateZ(15deg);}.css-xovze3,[data-css-xovze3]{height:1.5em;width:1.5em;fill:#dd4c39;margin:0 1em;transition:-webkit-transform 100ms ease-in-out 0ms ease 0ms,transform 100ms ease-in-out 0ms ease 0ms;-webkit-transition:-webkit-transform 100ms ease-in-out 0ms ease 0ms,transform 100ms ease-in-out 0ms ease 0ms;-moz-transition:transform 100ms ease-in-out 0ms ease 0ms;}.css-b8z1fx,[data-css-b8z1fx]{margin-bottom:1.45em;}.css-1i32x9d,[data-css-1i32x9d]{display:-webkit-box; display: -moz-box; display: -ms-flexbox; display: -webkit-flex; display: flex;justify-content:flex-end;align-items:baseline;-webkit-box-pack:end;-webkit-justify-content:flex-end;-webkit-box-align:baseline;-webkit-align-items:baseline;}.css-1i32x9d > *,[data-css-1i32x9d] > *{margin-left:1em;}.css-1kdo33z,[data-css-1kdo33z]{padding:1em 0 0;display:-webkit-box; display: -moz-box; display: -ms-flexbox; display: -webkit-flex; display: flex;align-items:baseline;-webkit-box-align:baseline;-webkit-align-items:baseline;}.css-1js2gtb,[data-css-1js2gtb]{font-size:1.5rem;font-weight:bold;text-decoration:none;line-height:1.45em;}.css-1js2gtb:hover,[data-css-1js2gtb]:hover{text-decoration:underline;}.css-qkolrv,[data-css-qkolrv]{font-size:0.85em;font-style:italic;margin-left:0.5em;opacity:0.75;}.css-1hx69qk,[data-css-1hx69qk]{margin-bottom:0.5em;text-overflow:ellipsis;overflow:hidden;opacity:0.75;}.css-u7agnl span,[data-css-u7agnl] span{font-size:0.85em;background-color:#rgba(255, 255, 255, .1);padding:0 1ex;opacity:1;}.css-u7agnl span:hover,[data-css-u7agnl] span:hover{background-color:#rgba(255, 255, 255, .2);cursor:pointer;}.css-18pdsvr,[data-css-18pdsvr]{opacity:0.25;}.css-1k72ztx,[data-css-1k72ztx]{font-size:0.85em;white-space:nowrap;}.css-10scxmb,[data-css-10scxmb]{font-size:0.85em;white-space:nowrap;border:1px solid white ;padding:0 1ex;}.css-62bqch,[data-css-62bqch]{margin-top:3em;}.css-62bqch > a,[data-css-62bqch] > a{text-decoration:none;margin-right:2em;font-variant:small-caps;}.css-62bqch > a:hover,[data-css-62bqch] > a:hover{text-decoration:underline;}.css-62bqch > a:not([href]),[data-css-62bqch] > a:not([href]){text-decoration:none;opacity:0.25;}.css-1yvpfy9,[data-css-1yvpfy9]{background-color:white;padding:2em 4em;}.css-1yvpfy9 h1,[data-css-1yvpfy9] h1{font-size:2.25rem;font-weight:bold;line-height:1.1em;margin-bottom:1.45rem;}.css-1yvpfy9 h2,[data-css-1yvpfy9] h2{font-size:1.62671rem;font-weight:bold;line-height:1.1em;margin-bottom:1.45rem;}.css-1yvpfy9 h3,[data-css-1yvpfy9] h3{font-size:1.38316rem;font-weight:bold;line-height:1.1em;margin-bottom:1.45rem;}.css-1yvpfy9 p,[data-css-1yvpfy9] p{margin-bottom:1.45rem;}.css-1yvpfy9 p *:last-child,[data-css-1yvpfy9] p *:last-child{margin-bottom:0px;}.css-1yvpfy9 b,[data-css-1yvpfy9] b, .css-1yvpfy9 strong, [data-css-1yvpfy9] strong{font-weight:bold;}.css-1yvpfy9 i,[data-css-1yvpfy9] i, .css-1yvpfy9 em, [data-css-1yvpfy9] em{font-style:italic;}.css-1yvpfy9 ol,[data-css-1yvpfy9] ol, .css-1yvpfy9 ul, [data-css-1yvpfy9] ul{margin:0px;margin-left:1.45rem;margin-bottom:1.45rem;list-style-position:outside;list-style-image:none;}.css-1yvpfy9 li,[data-css-1yvpfy9] li{margin-bottom:0.725rem;}.css-1yvpfy9 li > ol,[data-css-1yvpfy9] li > ol, .css-1yvpfy9 li > ul, [data-css-1yvpfy9] li > ul{margin-left:1.45rem;margin-bottom:0.725rem;margin-top:0.725rem;}.css-1yvpfy9 li *:last-child,[data-css-1yvpfy9] li *:last-child{margin-bottom:0px;}.css-1yvpfy9 li > p,[data-css-1yvpfy9] li > p{margin-bottom:0.725rem;}.css-1yvpfy9 ol,[data-css-1yvpfy9] ol{list-style-type:decimal;}.css-1yvpfy9 ol li,[data-css-1yvpfy9] ol li{padding-left:0px;}.css-1yvpfy9 ul,[data-css-1yvpfy9] ul{list-style-type:disc;}.css-1yvpfy9 ul li,[data-css-1yvpfy9] ul li{padding-left:0px;}.css-1yvpfy9 code,[data-css-1yvpfy9] code{background:hsla(0, 0%, 0%, 0.04);font-family:'SFMono-Regular', Consolas, 'Roboto Mono', 'Droid Sans Mono', 'Liberation Mono', Menlo, Courier, monospace;font-size:0.85rem;line-height:1.45rem;padding:.2em 0;}.css-1yvpfy9 pre,[data-css-1yvpfy9] pre{margin-bottom:1.45rem;font-size:0.85rem;line-height:1.42rem;background:hsla(0, 0%, 0%, 0.04);border-radius:3px;overflow:auto;word-wrap:normal;padding:1.45rem;}.css-1yvpfy9 pre code,[data-css-1yvpfy9] pre code{background:none;line-height:1.42em;}.css-1yvpfy9 a,[data-css-1yvpfy9] a{color:#dd4c39;text-decoration:none;}.css-1yvpfy9 a:hover,[data-css-1yvpfy9] a:hover{text-decoration:underline;}.css-4o09c9,[data-css-4o09c9]{background-color:#ececec;margin-top:auto;}.css-4o09c9 > div,[data-css-4o09c9] > div{display:-webkit-box; display: -moz-box; display: -ms-flexbox; display: -webkit-flex; display: flex;padding:1.45em;padding-top:1em;}.css-4o09c9 > div > section,[data-css-4o09c9] > div > section{opacity:0.65;transition:opacity 500ms ease 0ms;width:20%;-webkit-transition:opacity 500ms ease 0ms;-moz-transition:opacity 500ms ease 0ms;}.css-4o09c9 > div > section:last-child,[data-css-4o09c9] > div > section:last-child{opacity:0.75;margin-left:auto;align-self:flex-end;text-align:right;-webkit-align-self:flex-end;}.css-4o09c9 > div > section:hover,[data-css-4o09c9] > div > section:hover{opacity:1;}.css-4o09c9 > div > section h1,[data-css-4o09c9] > div > section h1{font-size:0.85em;text-transform:lowercase;font-variant:small-caps;opacity:0.5;margin-bottom:0.35em;}.css-4o09c9 > div > section a,[data-css-4o09c9] > div > section a{text-decoration:none;font-size:0.85rem;opacity:0.75;}.css-4o09c9 > div > section a:hover,[data-css-4o09c9] > div > section a:hover{opacity:1;}.css-l4x72g,[data-css-l4x72g]{background-color:#dd4c39;color:white;padding:2em 4em;}</style></head><body><div id="PhenomicRoot"><div class="css-1l4v2hy" data-reactroot=""><div class="css-1yu5lzr"><div class="css-uhxnxi"><div class="css-1tsxiyg"><div class="css-1n3mti3"><svg fill="currentColor" preserveAspectRatio="xMidYMid meet" height="1em" width="1em" viewBox="0 0 40 40" class="css-3xwse6" style="vertical-align:middle"><g><path d="m27.2 18.6q0-4.2-2.9-7.1t-7.1-2.9-7 2.9-3 7.1 2.9 7 7.1 3 7.1-3 2.9-7z m11.4 18.5q0 1.2-0.8 2.1t-2 0.8q-1.2 0-2-0.8l-7.7-7.7q-4 2.8-8.9 2.8-3.2 0-6.1-1.3t-5-3.3-3.4-5-1.2-6.1 1.2-6.1 3.4-5.1 5-3.3 6.1-1.2 6.1 1.2 5 3.3 3.4 5.1 1.2 6.1q0 4.9-2.7 8.9l7.6 7.6q0.8 0.9 0.8 2z"></path></g></svg><input class="css-h28iaj" placeholder="Search packages" value=""/></div><div class="css-17jpuwa"></div></div><a href="/" class="css-14dfss7"><svg class="css-xovze3"><use href="/logo.svg#logo" xlink:href="/logo.svg#logo" xmlns:xlink="http://www.w3.org/1999/xlink"></use></svg></a></div></div><div class="css-uhxnxi"><div class="css-b8z1fx"><header class="css-l4x72g"><div class="css-1i32x9d"><div class="css-1k72ztx">220<svg fill="currentColor" preserveAspectRatio="xMidYMid meet" height="1em" width="1em" viewBox="0 0 40 40" class="css-aerbj5" style="vertical-align:middle"><g><path d="m37.5 15l-12.2-1.6-5.3-10.9-5.3 10.9-12.2 1.6 9 8.2-2.3 11.8 10.8-5.8 10.8 5.8-2.3-11.8 9-8.2z"></path></g></svg></div><div class="css-1y9oups"><span class="css-16r2wsi">62%<svg fill="currentColor" preserveAspectRatio="xMidYMid meet" height="1em" width="1em" viewBox="0 0 40 40" class="css-1rq3syy" style="vertical-align:middle"><g><path d="m16.6 28.4l13.4-13.4-2.3-2.3-11.1 10.9-4.3-4.3-2.3 2.3z m3.4-26.8l15 6.8v10c0 9.2-6.4 17.8-15 20-8.6-2.2-15-10.8-15-20v-10z"></path></g></svg></span></div><div class="css-10scxmb">LGPL-3.0</div><div class="css-1k72ztx"><time dateTime="2017-12-12T20:11:42.924Z" title="2017-12-12T20:11:42.924Z">2 weeks ago</time></div></div><div class="css-1kdo33z"><a href="/packages/bucklescript-tea" class="css-1js2gtb">bucklescript-tea</a><span class="css-qkolrv">0.7.0</span></div><div class="css-nil"><div class="css-1hx69qk">TEA for Bucklescript</div><div class="css-u7agnl"><svg fill="currentColor" preserveAspectRatio="xMidYMid meet" height="1em" width="1em" viewBox="0 0 40 40" class="css-18pdsvr" style="vertical-align:middle"><g><path d="m9.5 10.5q0-1.2-0.8-1.9t-1.9-0.8-1.9 0.8-0.8 1.9 0.8 1.9 1.9 0.8 1.9-0.8 0.8-1.9z m22.7 12.2q0 1.1-0.8 1.9l-10.4 10.5q-0.8 0.8-2 0.8-1.1 0-1.9-0.8l-15.2-15.2q-0.8-0.8-1.3-2.2t-0.6-2.5v-8.8q0-1.1 0.8-1.9t1.9-0.8h8.9q1.1 0 2.5 0.5t2.1 1.4l15.2 15.2q0.8 0.8 0.8 1.9z m8.2 0q0 1.1-0.8 1.9l-10.5 10.5q-0.8 0.8-1.9 0.8-0.8 0-1.2-0.3t-1.2-1l10-10q0.8-0.8 0.8-1.9 0-1.1-0.8-1.9l-15.2-15.2q-0.8-0.8-2.1-1.4t-2.5-0.5h4.7q1.2 0 2.5 0.5t2.2 1.4l15.2 15.2q0.8 0.8 0.8 1.9z"></path></g></svg><a href="/keywords/tea" class="css-1ls92yq">tea</a><a href="/keywords/ocaml" class="css-1ls92yq">ocaml</a><a href="/keywords/bucklescript" class="css-1ls92yq">bucklescript</a></div></div><div class="css-62bqch"><a href="https://github.com/overminddl1/bucklescript-tea#readme">homepage</a><a href="https://github.com/overminddl1/bucklescript-tea">repository</a><a href="https://www.npmjs.com/package/bucklescript-tea">npm</a><a href="https://github.com/overminddl1/bucklescript-tea/issues">issues</a><a>documentation</a></div></header><div class="css-1yvpfy9"><h1 id="bucklescript-tea"><a aria-hidden="true" href="#bucklescript-tea"><span class="icon icon-link"></span></a>Bucklescript-TEA</h1>
<p><a href="https://nodei.co/npm/bucklescript-tea/"><img src="https://nodei.co/npm/bucklescript-tea.png?compact=true" alt="NPM"></a></p>
<p><a href="https://travis-ci.org/OvermindDL1/bucklescript-tea"><img src="https://travis-ci.org/OvermindDL1/bucklescript-tea.svg?branch=master" alt="Build Status"></a></p>
<h2 id="reason-to-use"><a aria-hidden="true" href="#reason-to-use"><span class="icon icon-link"></span></a>Reason to Use</h2>
<ul>
<li>Entirely event driven, this is like React/Flow but type-safe and significantly faster.</li>
<li>Amazingly fast compile-times, especially with the built-in watcher of Bucklescript.</li>
<li>You have the entire power of the OCaml language at your disposal to Javascript.</li>
<li>You have access to the highly optimized OCaml ecosystem if necessary.</li>
<li>You have access to the entire Javascript eco-system through a type-safe interface if necessary.</li>
<li>Open license, same as Bucklescript itself.</li>
</ul>
<h2 id="description"><a aria-hidden="true" href="#description"><span class="icon icon-link"></span></a>Description</h2>
<p>This is a library for OCaml-via-Bucklescript (though in the future to support native compilation for back-end template generation) that follows TEA/<a href="https://guide.elm-lang.org/architecture/">The Elm Architecture</a> as I see it in various incarnations.</p>
<p>You can read more about it <a href="http://blog.overminddl1.com/tags/bucklescript-tea/">here</a>.</p>
<p>Currently included and planned forms are:</p>
<ul>
<li class="task-list-item"><input type="checkbox" checked disabled> Elm API: Following the Elm API as closely as OCaml allows. Converting code back and forth between Elm and OCaml should be made as easy as possible (mostly organizing functions correctly and adding a few <code>let</code>'s around, a conversion utility to go back and forth is a 'nice-to-have' someday, but not currently in-dev, PR's welcome). It may be good to 'version' the API, break it out from the latest Elm API to follow different versions of the Elm API behind versioned modules that can be easily opened. This is not done yet but is a 'nice-to-have' goal before hitting version 1.0.0 to ensure even better API stability. Currently the <code>update</code> callback passes the <code>model</code> first instead of second as it makes matching on the message in a far more expected way, comments on reversing this back to Elm's way?</li>
<li class="task-list-item"><input type="checkbox" disabled> WebComponent: TEA is a wonderful way to reason about information flow and view generation, however the implementation in Elm is very broken when wanting to combine it with WebComponents due to lacking a few ways to listen for data changes (which also fits very well into the TEA <code>update</code> model, just Elm has not done it as of the date of this writing). This may be an extension on the above Elm API however it is possible that it may require breaking away from that API.</li>
<li class="task-list-item"><input type="checkbox" disabled> OCamlized-TEA: The Elm API is succinct, but highly inefficient in the amount of allocations it causes, though this is not necessary it would be nice to have a replacement API that takes effort to reduce the amount of allocations. Most real-world use would get near nothing out of this but for a few cases it would be quite useful to have an overhaul of the Virtual-DOM declaration style.</li>
<li class="task-list-item"><input type="checkbox" disabled> React: It would also be nice to have a React back-end for easier integration with React projects, both into and out of this component. This should not have any breaking change over the Elm API but would just be an extension on it.</li>
<li class="task-list-item"><input type="checkbox" disabled> Binding: Experiment with a method to build a vdom once then 'bind' to various parts of it. This will not follow TEA so precisely but the TEA style central event loop will still exist, this style will be quite different but may be even more simple while allowing even faster DOM diffing and updating.</li>
</ul>
<p>With the above any PR's are welcome to clean up code, flesh out functionality, and until we hit 1.0.0 break API compatibility if necessary (but as minimally as possible). 1.0.0 should be complete when the Elm API style is followed as closely as possible and becomes as optimized as it can become while following the API, once that is set then API breaking changes will only happen to match Elm updates. PR's are also welcome to add support to other systems such as Yarn as long as it does not break the base NPM packaging system.</p>
<h2 id="installation"><a aria-hidden="true" href="#installation"><span class="icon icon-link"></span></a>Installation</h2>
<h3 id="npm"><a aria-hidden="true" href="#npm"><span class="icon icon-link"></span></a>NPM</h3>
<p>First verify you have <code>bs-platform</code> installed, whether globally or just in your project.</p>
<p>Then install via npm by:</p>
<pre><code class="hljs language-sh">npm install --save-dev bucklescript-tea</code></pre>
<p>Then in your current Bucklescript project just use this as a dependency add this to your bsconfig.json file:</p>
<pre><code class="hljs language-json">  <span class="hljs-string">"bs-dependencies"</span> : [<span class="hljs-string">"bucklescript-tea"</span>]</code></pre>
<p><em>If you install it via any other method make sure that <code>bucklescript-tea</code> is a dependency in your npm's package.json file as <code>bsb</code> uses that for lookup.</em></p>
<h2 id="usage"><a aria-hidden="true" href="#usage"><span class="icon icon-link"></span></a>Usage</h2>
<h3 id="example-project"><a aria-hidden="true" href="#example-project"><span class="icon icon-link"></span></a>Example project</h3>
<p>Once you have your Bucklescript project set up and the dependencies configured as above then lets make a new TEA module, the Counter, as is traditional in Elm tutorials, this file will be named <code>counter.ml</code> in your <code>src</code> directory for this example. Code is described via inline comments:</p>
<pre><code class="hljs language-ocaml"><span class="hljs-comment">(* This line opens the Tea.App modules into the current scope for Program access functions and types *)</span>
<span class="hljs-keyword">open</span> <span class="hljs-type">Tea</span>.<span class="hljs-type">App</span>

<span class="hljs-comment">(* This opens the Elm-style virtual-dom functions and types into the current scope *)</span>
<span class="hljs-keyword">open</span> <span class="hljs-type">Tea</span>.<span class="hljs-type">Html</span>

<span class="hljs-comment">(* Let's create a new type here to be our main message type that is passed around *)</span>
<span class="hljs-keyword">type</span> msg =
  | <span class="hljs-type">Increment</span>  <span class="hljs-comment">(* This will be our message to increment the counter *)</span>
  | <span class="hljs-type">Decrement</span>  <span class="hljs-comment">(* This will be our message to decrement the counter *)</span>
  | <span class="hljs-type">Reset</span>      <span class="hljs-comment">(* This will be our message to reset the counter to 0 *)</span>
  | <span class="hljs-type">Set</span> <span class="hljs-keyword">of</span> <span class="hljs-built_in">int</span> <span class="hljs-comment">(* This will be out message to set the counter to a specific value *)</span>
  [@@bs.deriving {accessors}] <span class="hljs-comment">(* This is a nice quality-of-life addon from Bucklescript, it will generate function names for each constructor name, optional, but nice to cut down on code, this is unused in this example but good to have regardless *)</span>

<span class="hljs-comment">(* This is optional for such a simple example, but it is good to have an `init` function to define your initial model default values, the model for Counter is just an integer *)</span>
<span class="hljs-keyword">let</span> init <span class="hljs-literal">()</span> = <span class="hljs-number">4</span>

<span class="hljs-comment">(* This is the central message handler, it takes the model as the first argument *)</span>
<span class="hljs-keyword">let</span> update model = <span class="hljs-keyword">function</span> <span class="hljs-comment">(* These should be simple enough to be self-explanatory, mutate the model based on the message, easy to read and follow *)</span>
  | <span class="hljs-type">Increment</span> -> model + <span class="hljs-number">1</span>
  | <span class="hljs-type">Decrement</span> -> model - <span class="hljs-number">1</span>
  | <span class="hljs-type">Reset</span> -> <span class="hljs-number">0</span>
  | <span class="hljs-type">Set</span> v -> v

<span class="hljs-comment">(* This is just a helper function for the view, a simple function that returns a button based on some argument *)</span>
<span class="hljs-keyword">let</span> view_button title msg =
  button
    [ onClick msg
    ]
    [ text title
    ]

<span class="hljs-comment">(* This is the main callback to generate the virtual-dom.
  This returns a virtual-dom node that becomes the view, only changes from call-to-call are set on the real DOM for efficiency, this is also only called once per frame even with many messages sent in within that frame, otherwise does nothing *)</span>
<span class="hljs-keyword">let</span> view model =
  div
    <span class="hljs-literal">[]</span>
    [ span
        [ style <span class="hljs-string">"text-weight"</span> <span class="hljs-string">"bold"</span> ]
        [ text (string_of_int model) ]
    ; br <span class="hljs-literal">[]</span>
    ; view_button <span class="hljs-string">"Increment"</span> <span class="hljs-type">Increment</span>
    ; br <span class="hljs-literal">[]</span>
    ; view_button <span class="hljs-string">"Decrement"</span> <span class="hljs-type">Decrement</span>
    ; br <span class="hljs-literal">[]</span>
    ; view_button <span class="hljs-string">"Set to 42"</span> (<span class="hljs-type">Set</span> <span class="hljs-number">42</span>)
    ; br <span class="hljs-literal">[]</span>
    ; <span class="hljs-keyword">if</span> model &#x3C;> <span class="hljs-number">0</span> <span class="hljs-keyword">then</span> view_button <span class="hljs-string">"Reset"</span> <span class="hljs-type">Reset</span> <span class="hljs-keyword">else</span> noNode
    ]

<span class="hljs-comment">(* This is the main function, it can be named anything you want but `main` is traditional.
  The Program returned here has a set of callbacks that can easily be called from
  Bucklescript or from javascript for running this main attached to an element,
  or even to pass a message into the event loop.  You can even expose the
  constructors to the messages to javascript via the above [@@bs.deriving {accessors}]
  attribute on the `msg` type or manually, that way even javascript can use it safely. *)</span>
<span class="hljs-keyword">let</span> main =
  beginnerProgram { <span class="hljs-comment">(* The beginnerProgram just takes a set model state and the update and view functions *)</span>
    model = init <span class="hljs-literal">()</span>; <span class="hljs-comment">(* Since model is a set value here, we call our init function to generate that value *)</span>
    update;
    view;
  }</code></pre>
<p>If anything is typed wrong than the OCaml type checker will catch it and advise. Compilation times are wonderfully fast, probably faster than about any other compile-to-javascript language that you will come across.</p>
<p>To use this from javascript (with your bundler of choice) you can just do:</p>
<pre><code class="hljs language-javascript">  <span class="hljs-keyword">var</span> app = <span class="hljs-built_in">require</span>(<span class="hljs-string">"src/counter.ml"</span>).main(<span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">"my-element"</span>));</code></pre>
<p>And if you need to shut it down or pass it a message or so then you can do so via the <code>app</code> variable, or feel free to not assign it to a variable as well.</p>
<p>For further examples see the <a href="https://github.com/OvermindDL1/bucklescript-testing">bucklescript-testing</a> project for now until a full example set up is built.</p>
<h3 id="starter-kit"><a aria-hidden="true" href="#starter-kit"><span class="icon icon-link"></span></a>Starter-Kit</h3>
<p>There is a fantastic starter kit made by tcoopman that supports rollup combining of the files and a built-in server for testing, see and get it at: <a href="https://github.com/tcoopman/bucklescript-tea-starter-kit">tcoopman's starter kit</a></p></div></div></div><div class="css-4o09c9"><div class="css-uhxnxi"><section><h1>Project</h1><ul><li><a href="https://github.com/redex/redex.github.io">Source Code Repository</a></li><li><a href="https://github.com/redex/redex.github.io/issues">Support / Bug Tracker</a></li><li><a href="/publish">Get Published</a></li></ul></section><section><h1>Made with</h1><ul><li><a href="https://npms.io/">npms.io</a></li><li><a href="https://www.gatsbyjs.org/">Gatsby</a></li><li><a href="https://reasonml.github.io/reason-react/">ReasonReact</a></li><li><a href="https://github.com/bucklescript/bucklescript">BuckleScript</a></li><li><a href="https://github.com/threepointone/glamor">glamor</a></li></ul></section><section><h1>Reason</h1><ul><li><a href="https://reasonml.github.io/">Reason Homepage</a></li><li><a href="https://reasonml.github.io/guide">Reason Guide</a></li><li><a href="https://reasonml.github.io/try">Reason Playground</a></li></ul></section><section><a href="https://www.algolia.com"><img class="css-c2fbi5" src="/search-by-algolia.svg"/></a></section></div></div></div></div><script id="PhenomicHydration" type="text/json">{"path=packages&id=bucklescript-tea":{"status":"idle","node":{"filename":"bucklescript-tea.json","type":"published","id":"bucklescript-tea","name":"bucklescript-tea","version":"0.7.0","description":"TEA for Bucklescript","author":"OvermindDL1","license":"LGPL-3.0","keywords":["tea","ocaml","bucklescript"],"analyzed":"2017-12-12T20:11:42.924Z","updated":"2017-12-12T20:11:42.924Z","stars":220,"score":0.6225222404034877,"quality":0.7660485675421725,"popularity":0.12735690908218536,"maintenance":0.9946650056059174,"homepageUrl":"https://github.com/overminddl1/bucklescript-tea#readme","repositoryUrl":"https://github.com/overminddl1/bucklescript-tea","npmUrl":"https://www.npmjs.com/package/bucklescript-tea","issuesUrl":"https://github.com/overminddl1/bucklescript-tea/issues","docsUrl":null,"path":"packages/bucklescript-tea","body":"<h1 id=\"bucklescript-tea\"><a aria-hidden=\"true\" href=\"#bucklescript-tea\"><span class=\"icon icon-link\"></span></a>Bucklescript-TEA</h1>\n<p><a href=\"https://nodei.co/npm/bucklescript-tea/\"><img src=\"https://nodei.co/npm/bucklescript-tea.png?compact=true\" alt=\"NPM\"></a></p>\n<p><a href=\"https://travis-ci.org/OvermindDL1/bucklescript-tea\"><img src=\"https://travis-ci.org/OvermindDL1/bucklescript-tea.svg?branch=master\" alt=\"Build Status\"></a></p>\n<h2 id=\"reason-to-use\"><a aria-hidden=\"true\" href=\"#reason-to-use\"><span class=\"icon icon-link\"></span></a>Reason to Use</h2>\n<ul>\n<li>Entirely event driven, this is like React/Flow but type-safe and significantly faster.</li>\n<li>Amazingly fast compile-times, especially with the built-in watcher of Bucklescript.</li>\n<li>You have the entire power of the OCaml language at your disposal to Javascript.</li>\n<li>You have access to the highly optimized OCaml ecosystem if necessary.</li>\n<li>You have access to the entire Javascript eco-system through a type-safe interface if necessary.</li>\n<li>Open license, same as Bucklescript itself.</li>\n</ul>\n<h2 id=\"description\"><a aria-hidden=\"true\" href=\"#description\"><span class=\"icon icon-link\"></span></a>Description</h2>\n<p>This is a library for OCaml-via-Bucklescript (though in the future to support native compilation for back-end template generation) that follows TEA/<a href=\"https://guide.elm-lang.org/architecture/\">The Elm Architecture</a> as I see it in various incarnations.</p>\n<p>You can read more about it <a href=\"http://blog.overminddl1.com/tags/bucklescript-tea/\">here</a>.</p>\n<p>Currently included and planned forms are:</p>\n<ul>\n<li class=\"task-list-item\"><input type=\"checkbox\" checked disabled> Elm API: Following the Elm API as closely as OCaml allows. Converting code back and forth between Elm and OCaml should be made as easy as possible (mostly organizing functions correctly and adding a few <code>let</code>'s around, a conversion utility to go back and forth is a 'nice-to-have' someday, but not currently in-dev, PR's welcome). It may be good to 'version' the API, break it out from the latest Elm API to follow different versions of the Elm API behind versioned modules that can be easily opened. This is not done yet but is a 'nice-to-have' goal before hitting version 1.0.0 to ensure even better API stability. Currently the <code>update</code> callback passes the <code>model</code> first instead of second as it makes matching on the message in a far more expected way, comments on reversing this back to Elm's way?</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled> WebComponent: TEA is a wonderful way to reason about information flow and view generation, however the implementation in Elm is very broken when wanting to combine it with WebComponents due to lacking a few ways to listen for data changes (which also fits very well into the TEA <code>update</code> model, just Elm has not done it as of the date of this writing). This may be an extension on the above Elm API however it is possible that it may require breaking away from that API.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled> OCamlized-TEA: The Elm API is succinct, but highly inefficient in the amount of allocations it causes, though this is not necessary it would be nice to have a replacement API that takes effort to reduce the amount of allocations. Most real-world use would get near nothing out of this but for a few cases it would be quite useful to have an overhaul of the Virtual-DOM declaration style.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled> React: It would also be nice to have a React back-end for easier integration with React projects, both into and out of this component. This should not have any breaking change over the Elm API but would just be an extension on it.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled> Binding: Experiment with a method to build a vdom once then 'bind' to various parts of it. This will not follow TEA so precisely but the TEA style central event loop will still exist, this style will be quite different but may be even more simple while allowing even faster DOM diffing and updating.</li>\n</ul>\n<p>With the above any PR's are welcome to clean up code, flesh out functionality, and until we hit 1.0.0 break API compatibility if necessary (but as minimally as possible). 1.0.0 should be complete when the Elm API style is followed as closely as possible and becomes as optimized as it can become while following the API, once that is set then API breaking changes will only happen to match Elm updates. PR's are also welcome to add support to other systems such as Yarn as long as it does not break the base NPM packaging system.</p>\n<h2 id=\"installation\"><a aria-hidden=\"true\" href=\"#installation\"><span class=\"icon icon-link\"></span></a>Installation</h2>\n<h3 id=\"npm\"><a aria-hidden=\"true\" href=\"#npm\"><span class=\"icon icon-link\"></span></a>NPM</h3>\n<p>First verify you have <code>bs-platform</code> installed, whether globally or just in your project.</p>\n<p>Then install via npm by:</p>\n<pre><code class=\"hljs language-sh\">npm install --save-dev bucklescript-tea</code></pre>\n<p>Then in your current Bucklescript project just use this as a dependency add this to your bsconfig.json file:</p>\n<pre><code class=\"hljs language-json\">  <span class=\"hljs-string\">\"bs-dependencies\"</span> : [<span class=\"hljs-string\">\"bucklescript-tea\"</span>]</code></pre>\n<p><em>If you install it via any other method make sure that <code>bucklescript-tea</code> is a dependency in your npm's package.json file as <code>bsb</code> uses that for lookup.</em></p>\n<h2 id=\"usage\"><a aria-hidden=\"true\" href=\"#usage\"><span class=\"icon icon-link\"></span></a>Usage</h2>\n<h3 id=\"example-project\"><a aria-hidden=\"true\" href=\"#example-project\"><span class=\"icon icon-link\"></span></a>Example project</h3>\n<p>Once you have your Bucklescript project set up and the dependencies configured as above then lets make a new TEA module, the Counter, as is traditional in Elm tutorials, this file will be named <code>counter.ml</code> in your <code>src</code> directory for this example. Code is described via inline comments:</p>\n<pre><code class=\"hljs language-ocaml\"><span class=\"hljs-comment\">(* This line opens the Tea.App modules into the current scope for Program access functions and types *)</span>\n<span class=\"hljs-keyword\">open</span> <span class=\"hljs-type\">Tea</span>.<span class=\"hljs-type\">App</span>\n\n<span class=\"hljs-comment\">(* This opens the Elm-style virtual-dom functions and types into the current scope *)</span>\n<span class=\"hljs-keyword\">open</span> <span class=\"hljs-type\">Tea</span>.<span class=\"hljs-type\">Html</span>\n\n<span class=\"hljs-comment\">(* Let's create a new type here to be our main message type that is passed around *)</span>\n<span class=\"hljs-keyword\">type</span> msg =\n  | <span class=\"hljs-type\">Increment</span>  <span class=\"hljs-comment\">(* This will be our message to increment the counter *)</span>\n  | <span class=\"hljs-type\">Decrement</span>  <span class=\"hljs-comment\">(* This will be our message to decrement the counter *)</span>\n  | <span class=\"hljs-type\">Reset</span>      <span class=\"hljs-comment\">(* This will be our message to reset the counter to 0 *)</span>\n  | <span class=\"hljs-type\">Set</span> <span class=\"hljs-keyword\">of</span> <span class=\"hljs-built_in\">int</span> <span class=\"hljs-comment\">(* This will be out message to set the counter to a specific value *)</span>\n  [@@bs.deriving {accessors}] <span class=\"hljs-comment\">(* This is a nice quality-of-life addon from Bucklescript, it will generate function names for each constructor name, optional, but nice to cut down on code, this is unused in this example but good to have regardless *)</span>\n\n<span class=\"hljs-comment\">(* This is optional for such a simple example, but it is good to have an `init` function to define your initial model default values, the model for Counter is just an integer *)</span>\n<span class=\"hljs-keyword\">let</span> init <span class=\"hljs-literal\">()</span> = <span class=\"hljs-number\">4</span>\n\n<span class=\"hljs-comment\">(* This is the central message handler, it takes the model as the first argument *)</span>\n<span class=\"hljs-keyword\">let</span> update model = <span class=\"hljs-keyword\">function</span> <span class=\"hljs-comment\">(* These should be simple enough to be self-explanatory, mutate the model based on the message, easy to read and follow *)</span>\n  | <span class=\"hljs-type\">Increment</span> -> model + <span class=\"hljs-number\">1</span>\n  | <span class=\"hljs-type\">Decrement</span> -> model - <span class=\"hljs-number\">1</span>\n  | <span class=\"hljs-type\">Reset</span> -> <span class=\"hljs-number\">0</span>\n  | <span class=\"hljs-type\">Set</span> v -> v\n\n<span class=\"hljs-comment\">(* This is just a helper function for the view, a simple function that returns a button based on some argument *)</span>\n<span class=\"hljs-keyword\">let</span> view_button title msg =\n  button\n    [ onClick msg\n    ]\n    [ text title\n    ]\n\n<span class=\"hljs-comment\">(* This is the main callback to generate the virtual-dom.\n  This returns a virtual-dom node that becomes the view, only changes from call-to-call are set on the real DOM for efficiency, this is also only called once per frame even with many messages sent in within that frame, otherwise does nothing *)</span>\n<span class=\"hljs-keyword\">let</span> view model =\n  div\n    <span class=\"hljs-literal\">[]</span>\n    [ span\n        [ style <span class=\"hljs-string\">\"text-weight\"</span> <span class=\"hljs-string\">\"bold\"</span> ]\n        [ text (string_of_int model) ]\n    ; br <span class=\"hljs-literal\">[]</span>\n    ; view_button <span class=\"hljs-string\">\"Increment\"</span> <span class=\"hljs-type\">Increment</span>\n    ; br <span class=\"hljs-literal\">[]</span>\n    ; view_button <span class=\"hljs-string\">\"Decrement\"</span> <span class=\"hljs-type\">Decrement</span>\n    ; br <span class=\"hljs-literal\">[]</span>\n    ; view_button <span class=\"hljs-string\">\"Set to 42\"</span> (<span class=\"hljs-type\">Set</span> <span class=\"hljs-number\">42</span>)\n    ; br <span class=\"hljs-literal\">[]</span>\n    ; <span class=\"hljs-keyword\">if</span> model &#x3C;> <span class=\"hljs-number\">0</span> <span class=\"hljs-keyword\">then</span> view_button <span class=\"hljs-string\">\"Reset\"</span> <span class=\"hljs-type\">Reset</span> <span class=\"hljs-keyword\">else</span> noNode\n    ]\n\n<span class=\"hljs-comment\">(* This is the main function, it can be named anything you want but `main` is traditional.\n  The Program returned here has a set of callbacks that can easily be called from\n  Bucklescript or from javascript for running this main attached to an element,\n  or even to pass a message into the event loop.  You can even expose the\n  constructors to the messages to javascript via the above [@@bs.deriving {accessors}]\n  attribute on the `msg` type or manually, that way even javascript can use it safely. *)</span>\n<span class=\"hljs-keyword\">let</span> main =\n  beginnerProgram { <span class=\"hljs-comment\">(* The beginnerProgram just takes a set model state and the update and view functions *)</span>\n    model = init <span class=\"hljs-literal\">()</span>; <span class=\"hljs-comment\">(* Since model is a set value here, we call our init function to generate that value *)</span>\n    update;\n    view;\n  }</code></pre>\n<p>If anything is typed wrong than the OCaml type checker will catch it and advise. Compilation times are wonderfully fast, probably faster than about any other compile-to-javascript language that you will come across.</p>\n<p>To use this from javascript (with your bundler of choice) you can just do:</p>\n<pre><code class=\"hljs language-javascript\">  <span class=\"hljs-keyword\">var</span> app = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">\"src/counter.ml\"</span>).main(<span class=\"hljs-built_in\">document</span>.getElementById(<span class=\"hljs-string\">\"my-element\"</span>));</code></pre>\n<p>And if you need to shut it down or pass it a message or so then you can do so via the <code>app</code> variable, or feel free to not assign it to a variable as well.</p>\n<p>For further examples see the <a href=\"https://github.com/OvermindDL1/bucklescript-testing\">bucklescript-testing</a> project for now until a full example set up is built.</p>\n<h3 id=\"starter-kit\"><a aria-hidden=\"true\" href=\"#starter-kit\"><span class=\"icon icon-link\"></span></a>Starter-Kit</h3>\n<p>There is a fantastic starter kit made by tcoopman that supports rollup combining of the files and a built-in server for testing, see and get it at: <a href=\"https://github.com/tcoopman/bucklescript-tea-starter-kit\">tcoopman's starter kit</a></p>"}}}</script><script>window._glam = ["1tsxiyg","1n3mti3","3xwse6","h28iaj","17jpuwa","1y9oups","16r2wsi","1rq3syy","aerbj5","1ko2xl5","7hsp6e","iy895t","1sgndlo","dozz8","1hlgm7j","9ceowk","uxcia4","1frm6vc","uhxnxi","c2fbi5","1ls92yq","1l4v2hy","1yu5lzr","14dfss7","xovze3","b8z1fx","1i32x9d","1kdo33z","1js2gtb","qkolrv","1hx69qk","u7agnl","18pdsvr","1k72ztx","10scxmb","62bqch","1yvpfy9","4o09c9","l4x72g"]</script><script src="/phenomic/phenomic.main.a75d70f9.js" async=""></script></body></html>